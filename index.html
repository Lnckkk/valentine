<!doctype html>
<html lang="fr">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Je t'aime ‚ù§Ô∏è</title>
    <style>
        :root {
            --bg1: #f9c6d1;
            --bg2: #f3a9ba;
            --card: #f6f1ec;
            --text: #1f2430;
            --muted: #6b7280;
            --yes: #e6466a;
            --yesHover: #d83f61;
            --no: #e9e9ee;
            --shadow: 0 20px 60px rgba(0, 0, 0, .18);
            --radius: 18px;
        }

        * {
            box-sizing: border-box
        }

        html, body {
          height: 100%;
          margin: 0;
        }
        
        body{
          font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
          color: var(--text);
          background: radial-gradient(1200px 900px at 50% 20%, var(--bg1), var(--bg2));
          overflow: hidden;
        }
        
        /* Centrage stable (anti-saut) */
        .stage{
          position: fixed;
          inset: 0;
          display: grid;
          place-items: center;
          padding: 24px;
        }
        
        /* IMPORTANT : le fond de la carte */
        .card{
          width: min(760px, 92vw);
          background: var(--card);          /* ‚Üê le fond */
          border-radius: var(--radius);
          box-shadow: var(--shadow);
          padding: 28px 18px 22px;
          text-align: center;
          position: relative;
        }

        . {
            width: min(760px, 92vw);
            background: var(--card);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 28px 18px 22px;
            text-align: center;
            position: relative;
        }

        .mascot-emoji {
            font-size: 64px;
            margin: 6px auto 14px;
            filter: drop-shadow(0 10px 20px rgba(0, 0, 0, .15));
        }

        h1 {
            margin: 0 0 18px;
            font-size: clamp(24px, 3.4vw, 38px);
            font-weight: 800;
            letter-spacing: -0.02em;
        }

        .btn-area {
            position: relative;
            height: 92px;
            margin-top: 8px;
        }

        .btn {
            border: 0;
            border-radius: 999px;
            padding: 14px 26px;
            font-weight: 800;
            cursor: pointer;
            transition: transform .12s ease, background .12s ease, box-shadow .12s ease;
            user-select: none;
        }

        /* YES (grosse pilule rose) */
        #yesBtn {
            background: var(--yes);
            color: white;
            font-size: 22px;
            padding: 16px 46px;
            box-shadow: 0 14px 30px rgba(230, 70, 106, .35);
            position: absolute;
            left: 140px;
            top: 18px;
            transform-origin: center;
        }

        #yesBtn:hover {
            background: var(--yesHover);
        }

        /* NO (petit bouton gris qui fuit) */
        #noBtn {
            background: var(--no);
            color: #111827;
            font-weight: 700;
            position: absolute;
            left: 520px;
            top: 28px;
            padding: 12px 22px;
        }

        .hint {
            margin: 10px 0 0;
            font-size: 13px;
            color: var(--muted);
        }

        /* SUCCESS SCREEN */
        .success {
            display: none;
            margin-top: 10px;
            padding-top: 6px;
        }

        .success h2 {
            margin: 10px 0 10px;
            font-size: 34px;
            letter-spacing: -0.02em;
        }

        .success img {
            width: min(360px, 80vw);
            border-radius: 12px;
            border: 8px solid rgba(0, 0, 0, .08);
            box-shadow: 0 18px 50px rgba(0, 0, 0, .18);
        }

        /* Confettis canvas */
        canvas#confetti {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 10;
        }

        /* Mobile tweaks */
        @media (max-width:520px) {
            #yesBtn {
                left: 20px;
                top: 18px;
            }

            #noBtn {
                left: 210px;
                top: 28px;
            }

            .btn-area {
                height: 110px;
            }
        }
    </style>
</head>

<body>
    <canvas id="confetti"></canvas>

    <div class="stage">
        <div class="card" id="card">
            <!-- Petit ‚Äúchat‚Äù simple en SVG (tu peux remplacer par une image) -->
            <div class="mascot-emoji">ü•∞</div>
            <defs>
                <filter id="s" x="-50%" y="-50%" width="200%" height="200%">
                    <feDropShadow dx="0" dy="6" stdDeviation="6" flood-color="#000" flood-opacity=".15" />
                </filter>
            </defs>
            <g filter="url(#s)">
                <circle cx="60" cy="64" r="38" fill="#f3b27a" />
                <path d="M33 42 L46 30 L50 48" fill="#f3b27a" />
                <path d="M87 42 L74 30 L70 48" fill="#f3b27a" />
                <circle cx="48" cy="60" r="5.5" fill="#121826" />
                <circle cx="72" cy="60" r="5.5" fill="#121826" />
                <path d="M60 65 C56 68, 64 68, 60 65" stroke="#121826" stroke-width="3" fill="none"
                    stroke-linecap="round" />
                <path d="M58 70 C52 76, 46 76, 42 73" stroke="#121826" stroke-width="3" fill="none"
                    stroke-linecap="round" />
                <path d="M62 70 C68 76, 74 76, 78 73" stroke="#121826" stroke-width="3" fill="none"
                    stroke-linecap="round" />
                <path d="M87 30 C98 22, 108 30, 100 42 C94 52, 87 54, 87 54 C87 54, 80 52, 74 42 C66 30, 76 22, 87 30Z"
                    fill="#e6466a" />
            </g>
            </svg>
    
            <h1><span id="name">C√©lia</span> veux-tu √™tre ma valentine ?</h1>
    
            <div class="btn-area" id="btnArea">
                <button class="btn" id="yesBtn">Oui</button>
                <button class="btn" id="noBtn">Non</button>
            </div>
    
            <p class="hint" id="hint">‚ÄúNon‚Äù semble un peu timide üòà</p>
    
            <div class="success" id="success">
                <h2>OUIII ! üéâ</h2>
                <img src="https://media1.tenor.com/m/0DfyPxyrhhsAAAAd/happy-ecstatic.gif" alt="Happy Ecstatic"
                    referrerpolicy="no-referrer"
                    onerror="this.outerHTML='<p style=&quot;margin:0;color:#6b7280&quot;>Impossible de charger le GIF üò≠</p>'" />
    
            </div>
    
        </div>
    </div>

    <script>
        // --- 1) Pr√©nom via URL : ?name=xxx ---
        const params = new URLSearchParams(location.search);
        const name = params.get("name")?.trim();
        if (name) document.getElementById("name").textContent = name;

        const card = document.getElementById("card");
        const btnArea = document.getElementById("btnArea");
        const yesBtn = document.getElementById("yesBtn");
        const noBtn = document.getElementById("noBtn");
        const hint = document.getElementById("hint");
        const success = document.getElementById("success");


        // Place les boutons proprement au chargement (surtout mobile)
        function clamp(n, min, max) { return Math.max(min, Math.min(max, n)); }

        function moveNoButton() {
            const areaRect = btnArea.getBoundingClientRect();

            // Dimensions du bouton No
            const w = noBtn.offsetWidth;
            const h = noBtn.offsetHeight;

            // Zone possible (padding visuel)
            const pad = 10;
            const maxX = areaRect.width - w - pad;
            const maxY = areaRect.height - h - pad;

            // Nouvelle position random
            const x = Math.random() * maxX + pad / 2;
            const y = Math.random() * maxY + pad / 2;

            noBtn.style.left = x + "px";
            noBtn.style.top = y + "px";

            // Chaque dodge : Yes grossit un peu
            noDodges++;
            yesScale = clamp(1 + noDodges * 0.12, 1, 3.2);
            yesBtn.style.transform = `scale(${yesScale})`;

            // Change le texte du hint (optionnel)
            const lines = [
                "‚ÄúNon‚Äù semble un peu timide üòà",
                "Tu es s√ªre ? üëÄ",
                "Nope, √ßa marche pas üòÖ",
                "Allez‚Ä¶ clique Yes üòá",
                "Bon‚Ä¶ j‚Äôinsiste üò§"
            ];
            hint.textContent = lines[Math.min(noDodges, lines.length - 1)];
        }

        // Le bouton No fuit : au survol + au focus (clavier) + au touchstart (mobile)
        noBtn.addEventListener("mouseenter", moveNoButton);
        noBtn.addEventListener("focus", moveNoButton);
        noBtn.addEventListener("touchstart", (e) => { e.preventDefault(); moveNoButton(); }, { passive: false });

        // Si quelqu‚Äôun arrive √† cliquer No : m√™me effet (il bouge)
        noBtn.addEventListener("click", (e) => {
            e.preventDefault();
            moveNoButton();
        });

        // YES : succ√®s
        yesBtn.addEventListener("click", () => {
            btnArea.style.display = "none";
            hint.style.display = "none";
            success.style.display = "block";
            launchConfetti(1800);
        });

        // --- 2) Confettis (canvas, sans librairie) ---
        const canvas = document.getElementById("confetti");
        const ctx = canvas.getContext("2d");

        function resize() {
            canvas.width = window.innerWidth * devicePixelRatio;
            canvas.height = window.innerHeight * devicePixelRatio;
        }
        window.addEventListener("resize", resize);
        resize();

        function launchConfetti(durationMs = 1500) {
            const t0 = performance.now();
            const pieces = [];
            const colors = ["#e6466a", "#ffcc66", "#7dd3fc", "#a7f3d0", "#c4b5fd", "#fda4af"];

            const count = 180;
            for (let i = 0; i < count; i++) {
                pieces.push({
                    x: Math.random() * canvas.width,
                    y: -20 - Math.random() * canvas.height * 0.2,
                    r: 4 + Math.random() * 6,
                    vx: (-2 + Math.random() * 4) * devicePixelRatio,
                    vy: (2 + Math.random() * 5) * devicePixelRatio,
                    rot: Math.random() * Math.PI,
                    vr: (-0.2 + Math.random() * 0.4),
                    col: colors[(Math.random() * colors.length) | 0],
                    shape: Math.random() < 0.5 ? "rect" : "circle"
                });
            }

            function frame(now) {
                const elapsed = now - t0;
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                pieces.forEach(p => {
                    p.x += p.vx;
                    p.y += p.vy;
                    p.vy += 0.03 * devicePixelRatio; // gravity
                    p.rot += p.vr;

                    ctx.save();
                    ctx.translate(p.x, p.y);
                    ctx.rotate(p.rot);
                    ctx.fillStyle = p.col;

                    if (p.shape === "rect") {
                        ctx.fillRect(-p.r, -p.r / 2, p.r * 2, p.r);
                    } else {
                        ctx.beginPath();
                        ctx.arc(0, 0, p.r * 0.7, 0, Math.PI * 2);
                        ctx.fill();
                    }
                    ctx.restore();
                });

                // Stop condition
                if (elapsed < durationMs) {
                    requestAnimationFrame(frame);
                } else {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                }
            }
            requestAnimationFrame(frame);
        }

        // Position initiale "No" si besoin (petit random)
        setTimeout(() => {
            // random l√©ger au d√©part pour √©viter alignement parfait
            const r = btnArea.getBoundingClientRect();
            if (r.width) {
                noBtn.style.left = clamp(r.width * 0.65, 160, r.width - 80) + "px";
                noBtn.style.top = "28px";
            }
        }, 50);
    </script>
</body>


</html>


